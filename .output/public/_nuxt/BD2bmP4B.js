import{_ as v,c as f,o as c,r as D,e as N,f as E,a as p,n as R,g,h as O,t as M,F as y,i as V,j as B,w as W,d as z,k as U,p as F,l as x,m as G,q as H,s as I,v as $,x as C,y as q,z as P,A as J,b as T}from"./B49iMZdk.js";import{u as K,a as Q}from"./Ddhsy5Iz.js";const X={},Y={class:"tag"};function Z(e,t){return c(),f("span",Y,[D(e.$slots,"default")])}const ee=Object.assign(v(X,[["render",Z]]),{__name:"TagsItem"}),te={class:"w-full flex flex-col sm:flex-row hover:bg-neutral-700 cursor-pointer justify-start items-center border-b-1 border-r-1 border-[#3b3b40]"},ne={class:"w-full h-full p-8"},se={class:"text-primary"},oe={size:"small",class:"mb-4 text-white inline-flex gap-1"},re=["innerHTML"],ie=N({__name:"item",props:{item:{}},setup(e){const{getCategoryByUUID:t,loadCategory:n,allCategories:i}=K();i.value.length===0&&n();const l=E().public.API;return(o,r)=>{const s=ee;return c(),f("div",te,[p("div",{class:"w-full min-h-[450px] h-full article-cover",style:R(`background-image: url(${g(l)}/assets/${o.item.cover});`)},null,4),p("div",ne,[p("h2",se,M(o.item.name),1),p("div",oe,[(c(!0),f(y,null,V(o.item.categories,d=>(c(),B(s,null,{default:W(()=>[z(M(g(t)(d.categories_uuid||"")),1)]),_:2},1024))),256))]),o.item.short_content?(c(),f("div",{key:0,class:"text-white",innerHTML:o.item.short_content},null,8,re)):O("",!0)])])}}}),ae=Object.assign(v(ie,[["__scopeId","data-v-9c10daa4"]]),{__name:"NewsItem"}),ce=()=>{const e=U([]),t=Q(),n=4;let i=0,l=!1;return{items:e,fetchItems:async()=>{if(t.start(),l){t.finish();return}await $fetch("/api/articles?limit="+n+"&offset="+i).then(r=>{if(i===0)e.value=r;else{Array.isArray(r)&&r.length===0&&(l=!0);for(let s of r)e.value.push(s)}t.finish(),i+=n})},loadingBar:t}},le=F("/spinner.svg"),ue={},fe={width:"50",src:le,alt:"loading"};function de(e,t){return c(),f("img",fe)}const _e=Object.assign(v(ue,[["render",de]]),{__name:"CharedSpinner"});function me(e){return G()?(H(e),!0):!1}const pe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const he=e=>e!=null,w=()=>{};function ge(e){return Array.isArray(e)?e:[e]}function ve(e,t,n){return x(e,t,{...n,once:!0})}const j=pe?window:void 0;function b(e){var t;const n=$(e);return(t=n?.$el)!=null?t:n}function we(){const e=I(!1),t=P();return t&&q(()=>{e.value=!0},t),e}function be(e){const t=we();return C(()=>(t.value,!!e()))}function ye(e,t,n={}){const{root:i,rootMargin:l="0px",threshold:o=0,window:r=j,immediate:s=!0}=n,d=be(()=>r&&"IntersectionObserver"in r),_=C(()=>{const h=$(e);return ge(h).map(b).filter(he)});let a=w;const u=I(s),m=d.value?x(()=>[_.value,b(i),u.value],([h,L])=>{if(a(),!u.value||!h.length)return;const k=new IntersectionObserver(t,{root:b(L),rootMargin:l,threshold:o});h.forEach(A=>A&&k.observe(A)),a=()=>{k.disconnect(),a=w}},{immediate:s,flush:"post"}):w,S=()=>{a(),m(),u.value=!1};return me(S),{isSupported:d,isActive:u,pause(){a(),u.value=!1},resume(){u.value=!0},stop:S}}function xe(e,t={}){const{window:n=j,scrollTarget:i,threshold:l=0,rootMargin:o,once:r=!1}=t,s=I(!1),{stop:d}=ye(e,_=>{let a=s.value,u=0;for(const m of _)m.time>=u&&(u=m.time,a=m.isIntersecting);s.value=a,r&&ve(s,()=>{d()})},{root:i,window:n,threshold:l,rootMargin:$(o)});return s}const Ie={class:"w-full grid grid-cols-1 xl:grid-cols-2"},$e=N({__name:"index",setup(e){const t=J("loader"),n=xe(t),{fetchItems:i,items:l,loadingBar:o}=ce();x(n,s=>{s&&i()});const r=C(()=>!o.isLoading.value);return(s,d)=>{const _=ae;return c(),f(y,null,[p("div",Ie,[(c(!0),f(y,null,V(g(l),a=>(c(),B(_,{key:a.uuid,item:a},null,8,["item"]))),128))]),g(r)?(c(),f("div",{key:0,class:"flex justify-center items-center p-4",ref_key:"loader",ref:t},[T(_e)],512)):O("",!0)],64)}}}),Ce=Object.assign($e,{__name:"News"}),Se={};function ke(e,t){const n=Ce;return c(),f("section",null,[T(n)])}const Ne=v(Se,[["render",ke]]);export{Ne as default};
